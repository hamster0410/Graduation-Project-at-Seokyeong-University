# Rì–¸ì–´ í•™ìŠµ ì»¤ë®¤ë‹ˆí‹°
<br/>
<br/>

# ğŸ“ƒëª©ì°¨

- ê°œìš”
  - í”„ë¡œì íŠ¸ ëª©ì 
  - í”„ë¡œì íŠ¸ ì•„ì´ë””ì–´ ë° ë°°ê²½ ì„¤ëª…
- ì„¤ê³„
  - Flow Chart
  - ì‹œìŠ¤í…œ ìŠ¤í™ ë° ì„¤ì •
  - ì‚¬ìš©ëœ ê¸°ìˆ  ìŠ¤íƒ
  - ERD ì„¤ê³„
- ë™ì‘ í™”ë©´
- issue ì‚¬í•­
<br/>
<br/>

# ğŸ“Œ í”„ë¡œì íŠ¸ ëª©ì 

- ì„œê²½ëŒ€ ì»´í“¨í„°ê³µí•™ê³¼ ë³µìˆ˜ì „ê³µ ì¡¸ì—…ì‘í’ˆì„ ìœ„í•´ ê°œë°œí•˜ì˜€ìŠµë‹ˆë‹¤.
- êµ­ë¹„êµìœ¡(í´ë¼ìš°ë“œ ì—”ì§€ë‹ˆì–´ë§)ê³¼ ë³µìˆ˜ì „ê³µ ê³¼ì • ë™ì•ˆ ë°°ìš´ ì§€ì‹ë“¤ì„ ìµœëŒ€í•œ í™œìš©í•œ ì›¹ ì„œë¹„ìŠ¤ ê°œë°œ í•˜ëŠ”ê²ƒì…ë‹ˆë‹¤.
- ì›¹ì—ì„œ ì½”ë”©í•˜ê³  ì†Œí†µí•  ìˆ˜ ìˆëŠ” ì½”ë”© ì»¤ë®¤ë‹ˆí‹°ë¥¼ ê°œë°œí•˜ëŠ” ê²ƒì´ ëª©ì ì…ë‹ˆë‹¤.
<br/>
<br/>

# ğŸ’¡ ì•„ì´ë””ì–´ ë° ë°°ê²½

- ë¹…ë°ì´í„° ì‹œì¥ì˜ ì¦ê°€ì™€ ë°ì´í„° ë¶„ì„ê°€ì— ëŒ€í•œ ìˆ˜ìš” ì¦ê°€í•˜ëŠ” ì¶”ì„¸ì…ë‹ˆë‹¤.
- ê·¸ì— ë‹¤ë¥¸ ë°ì´í„° ë¶„ì„ ì–¸ì–´ì¸ Rì— ëŒ€í•œ ì‚¬ëŒë“¤ì˜ ìˆ˜ìš”ê°€ ì»¤ì§ˆ ê²ƒìœ¼ë¡œ ì˜ˆìƒí•©ë‹ˆë‹¤.
- ì½”ë”©ì„ ì²˜ìŒ ì ‘í•˜ëŠ” ì‚¬ëŒë“¤ì´ Rì— ëŒ€í•´ ê³µë¶€í•˜ê³  ì†Œí†µí•  ìˆ˜ ìˆëŠ” ì»¤ë®¤ë‹ˆí‹° êµ¬ì¶•í•˜ë©´ ì¢‹ê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.
- ë„ì»¤ìŠ¤ì›œì„ í™œìš©í•´ ê°œë³„ ì‚¬ìš©ìë§ˆì RìŠ¤íŠœë””ì˜¤ ì»¨í…Œì´ë„ˆë¥¼ ì œê³µí•´ ê°œë³„ì ì¸ ì½”ë”©í™˜ê²½ì„ ì œê³µí•˜ë©´ ì¢‹ê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.
<br/>
<br/>

#  <img src="https://github.com/user-attachments/assets/7214e980-8399-4a69-9fe2-4e9ac047ac8a" alt="Flow Chart" style="width:30px; height:auto;">  Flow Chart

- ì„¸ì…˜ ê¸°ë°˜ ë¡œê·¸ì¸ ì¸ì¦ êµ¬í˜„ - redis ì„œë²„ì— ì„¸ì…˜ ì €ì¥
- ì›¹ ê²Œì‹œíŒ CRUD, ëŒ“ê¸€, ì¢‹ì•„ìš”, ë™ì˜ìƒ ë§í¬ ì—…ë¡œë“œ
- ë„¤ì´ë²„ ê²€ìƒ‰ APIë¥¼ í™œìš©í•œ ë„ì„œ ì •ë³´ ê²€ìƒ‰
- ì›¹ ì„œë²„ì—ì„œ JSchë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ ë„ì»¤ìŠ¤ì›œ RStudio ì„œë¹„ìŠ¤ ì‹¤í–‰, ë° ì‚­ì œ
- ì„œë²„ê°„ NFS ë§ˆìš´íŠ¸ë¥¼ ì‚¬ìš©í•´ ì‚¬ìš©ìê°€ ì‘ì„±í•œ í”„ë¡œê·¸ë¨ì„ ì—…ë¡œë“œ
- ìƒ¤ì´ë‹ˆ ì„œë²„ ì ‘ì† - ë‹¤ë¥¸ ì‚¬ëŒ í”„ë¡œê·¸ë¨ ì‚¬ìš©

![ì œëª©ì„-ì…ë ¥í•´ì£¼ì„¸ìš”_-002 (1)](https://github.com/user-attachments/assets/96099b41-e373-4f74-9abc-0d841395c690)

<br/>
<br/>

# ğŸ’» ì‹œìŠ¤í…œ ìŠ¤í™ ë° ì„¤ì •

![image](https://github.com/user-attachments/assets/f518f2d0-0ad0-40b3-a5ef-7a14bc5f8322)

### Redis ì„œë²„

```bash
$ apt-get update
$ apt-get upgrade
$ sudo apt-get install redis-server
$ vi /etc/redis/redis.conf
$ maxmemory 1g
$ maxmemory-policy allkeys-lru
$ bind 0.0.0.0 
$ requirepass ì•„ë¬´ê±°ë‚˜
$ apt-get install redis-tools
```

### ManagerNode & WorkerNode

```bash
ë§¤ë‹ˆì €ë…¸ë“œ, ì›Œì»¤ë…¸ë“œ ë„ì»¤ì„¤ì¹˜
# Add Docker's official GPG key:
sudo apt-get update
sudo apt-get install ca-certificates curl
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc

# Add the repository to Apt sources:
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt-get update

sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

### ManagerNode

```bash
JSCHë¥¼ ìœ„í•œ í—ˆìš© ì„¤ì •
vi /etc/ssh/sshd_config
AllowTcpForwarding yes

ë„ì»¤ ìŠ¤ì›œ ì‹œì‘
docker swarm init --advertise-addr 192.168.99.121

ìƒ¤ì´ë‹ˆì„œë²„ ì„¤ì¹˜ 
https://posit.co/download/shiny-server/

NFS ì„œë²„ ì„¤ì¹˜
sudo apt install nfs-kernel-server -y

NFS ê³µìœ  ë””ë ‰í† ë¦¬ ì„¤ì •
/etc/exports íŒŒì¼ì— ë””ë ‰í† ë¦¬ë¥¼ ê³µìœ í•˜ë„ë¡ ì„¤ì • 

/usr/local/lib/R/site-library ê³µìœ iPëŒ€ì—­(rw,sync,no_subtree_check)
/usr/home ê³µìœ iPëŒ€ì—­(rw,sync,no_subtree_check)
sudo exportfs -ra
sudo systemctl restart nfs-kernel-server

ë„ì»¤ ë„¤íŠ¸ì›Œí¬ 
docker network create -d overlay rstudio
```

### WorkerNode

```bash

docker swarm join --token SWMTKN-1-5dbiad4b2at4ha56tzhljfn9kk2rm4hy3c2mh2b9usbzswzwl1-38ixsz9pcrm3ajw99wkupojfp 192.168.0.19:2377

/mntê²½ë¡œì— shiny_libraryì™€ data ë””ë ‰í† ë¦¬ ìƒì„±
root@workernode2:/mnt# mkdir data
root@workernode2:/mnt# mkdir shiny-library

NFS í´ë¼ì´ì–¸íŠ¸ ì„¤ì¹˜
sudo apt install nfs-common -y

Managerë…¸ë“œì— íŒŒì¼ ë§ˆìš´íŠ¸ 
sudo mount nfs_server_ip:/usr/local/lib/R/site-library /mnt/site-library

ìë™ ë§ˆìš´íŠ¸ ì„¤ì • (ì„ íƒ ì‚¬í•­)
í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‹œìŠ¤í…œì´ ë¶€íŒ…ë  ë•Œë§ˆë‹¤ ìë™ìœ¼ë¡œ NFS ê³µìœ ë¥¼ ë§ˆìš´íŠ¸í•˜ë ¤ë©´ /etc/fstab íŒŒì¼ì— ë‹¤ìŒ ë¼ì¸ì„ ì¶”ê°€

nfs_server_ip:/usr/local/lib/R/site-library /mnt/site-library nfs defaults 0 0
nfs_server_ip:/home /home nfs defaults 0 0
```

### Dockerfile

```yaml
FROM rocker/rstudio

RUN apt-get update && \
    apt-get install -y \
    libssl-dev \
    libcurl4-openssl-dev \
    libxml2-dev \
```
<br/>
<br/>

# <img src="https://github.com/user-attachments/assets/d9c862bb-d681-4788-9233-36db34292c38" alt="ì‚¬ìš©ëœ ê¸°ìˆ  ìŠ¤íƒ" width="40"> ì‚¬ìš©ëœ ê¸°ìˆ  ìŠ¤íƒ

![%EC%A0%9C%EB%AA%A9%EC%9D%84-%EC%9E%85%EB%A0%A5%ED%95%B4%EC%A3%BC%EC%84%B8%EC%9A%94_-001](https://github.com/user-attachments/assets/ccc954de-18ad-47f7-a890-e495396d0d97)
<br/>
<br/>

# ğŸ§±  ERD ì„¤ê³„

![Untitled_(1)](https://github.com/user-attachments/assets/bbbdbee6-fd84-4b42-b3e4-d14e4b68acf7)


# :fire: ë™ì‘í™”ë©´

### ê¸°ë³¸ì›¹ì‚¬ì´íŠ¸
<p align="center">
  <img src="https://github.com/user-attachments/assets/3c8b961d-22d9-4e4b-a3db-d0ce4db2b97c" alt="ê¸°ë³¸ ì›¹ì‚¬ì´íŠ¸" style="display: block; margin: auto; border: 2px solid #000;">
</p>
<br/>

### ê¸°ë³¸ ê²Œì‹œíŒ
<p align="center">
  <img src="https://github.com/user-attachments/assets/0f8aa01c-21af-411c-8ae6-897e0495464b" style="display: block; margin: auto; border: 2px solid #000;">
</p>
<br/>

### ìœ íŠœë¸Œ ê²Œì‹œíŒ ëŒ“ê¸€
<p align="center">
  <img src="https://github.com/user-attachments/assets/ed10fbda-fa55-4dd0-8b3d-7574caebeaec" style="display: block; margin: auto; border: 2px solid #000;">
</p>
<br/>

### ë„ì„œ ê²€ìƒ‰
<p align="center">
  <img src="https://github.com/user-attachments/assets/de59b979-6102-4d82-82b5-cbef96a480ca" style="display: block; margin: auto; border: 2px solid #000;">
</p>
<br/>

### íšŒì› ì½”ë”© ì»¨í…Œì´ë„ˆ ìƒì„±
<p align="center">
  <img src="https://github.com/user-attachments/assets/7e26dd2a-5112-4e02-b622-9759660a01c9" style="display: block; margin: auto; border: 2px solid #000;">
</p>
<br/>

### Rì–¸ì–´ í™œìš© ì•± ì½”ë”©
<p align="center">
  <img src="https://github.com/user-attachments/assets/965803a5-9162-4ce2-ac6c-08b2193d6e9e" style="display: block; margin: auto; border: 2px solid #000;">
</p>
<br/>

### ì•± ê³µìœ 
<p align="center">
  <img src="https://github.com/user-attachments/assets/e425d0c4-98af-4e85-a5df-d29de6a97a83" style="display: block; margin: auto; border: 2px solid #000;">
</p>
<br/>

### ì•± í™•ì¸
<p align="center">
  <img src="https://github.com/user-attachments/assets/c80cb620-c00b-4bc4-9396-f707426af33d" style="display: block; margin: auto; border: 2px solid #000;">
</p>
<br/>

### ì•± íšŒìˆ˜ ë° ì‚­ì œ
<p align="center">
  <img src="https://github.com/user-attachments/assets/72e7258f-5382-4c6d-9178-c0fb98c4d644" style="display: block; margin: auto; border: 2px solid #000;">
</p>
<br/>
<br/>

# :mag: issue ì‚¬í•­
- ì„œë²„ê°„ í†µì‹  ë¶ˆì™„ì „í•  ì‹œ ì‹œìŠ¤í…œ ì—ëŸ¬ì²˜ë¦¬ ë¯¸í¡í•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤. 
- ì‚¬ìš©ìê°„ Rë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë‹¤ë¥¼ ì‹œ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤. ê°œë³„ ì‚¬ìš©ìê°„ ì‹œìŠ¤í…œì„ ë”°ë¡œ êµ¬ì¶•í•´ì•¼ í•©ë‹ˆë‹¤. 
- ì‚¬ìš©ìê°„ ì†Œí†µì´ ê²Œì‹œíŒì„ ì œì™¸í•˜ë©´ ë¯¸í¡í•˜ì˜€ìŠµë‹ˆë‹¤. 

